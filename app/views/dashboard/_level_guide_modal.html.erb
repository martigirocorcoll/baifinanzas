<!-- Modal Guía de Niveles Financieros -->
<div class="modal fade" id="levelGuideModal" tabindex="-1" aria-labelledby="levelGuideModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-scrollable">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="levelGuideModalLabel">
          <i class="bi bi-info-circle"></i> Guía de Niveles Financieros
        </h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <p class="text-muted mb-3" style="font-size: 0.95rem;">
          Tu nivel financiero se calcula automáticamente según tus datos de ingresos, gastos, activos y deudas.
          Esta guía te ayuda a entender qué significa cada nivel y por qué estás en tu nivel actual.
        </p>

        <!-- Nivel 1: Situación Crítica -->
        <div class="level-guide-card mb-3 border-level-1">
          <div class="d-flex align-items-center mb-2">
            <span class="level-number-badge bg-danger text-white me-2">1</span>
            <i class="bi bi-exclamation-triangle-fill text-danger me-2" style="font-size: 1.2rem;"></i>
            <h6 class="mb-0 flex-grow-1"><strong>Situación Crítica</strong></h6>
          </div>
          <div class="level-content">
            <p class="mb-2 level-description">
              Estás en este nivel cuando tus gastos igualan o superan tus ingresos mensuales, lo que significa que no tienes capacidad de ahorro consistente.
              Es una situación común que muchas personas atraviesan, especialmente al inicio de su vida laboral o tras cambios importantes en sus circunstancias.
            </p>
            <span class="badge bg-light text-dark border">
              <small><strong>Criterio:</strong> Flujo de caja ≤ 0</small>
            </span>
          </div>
        </div>

        <!-- Nivel 2: Creando Fondo de Emergencia -->
        <div class="level-guide-card mb-3 border-level-2">
          <div class="d-flex align-items-center mb-2">
            <span class="level-number-badge bg-warning text-dark me-2">2</span>
            <i class="bi bi-piggy-bank-fill text-warning me-2" style="font-size: 1.2rem;"></i>
            <h6 class="mb-0 flex-grow-1"><strong>Creando Fondo de Emergencia</strong></h6>
          </div>
          <div class="level-content">
            <p class="mb-2 level-description">
              Has conseguido el primer gran logro: tus ingresos superan tus gastos cada mes, lo que te permite ahorrar.
              Estás en proceso de construir tu colchón de seguridad financiero. Aunque aún no tienes suficiente ahorrado para cubrir 4 meses de gastos imprevistos,
              vas por buen camino.
            </p>
            <span class="badge bg-light text-dark border">
              <small><strong>Criterios:</strong> Flujo positivo + Activos líquidos < 4 meses gastos</small>
            </span>
          </div>
        </div>

        <!-- Nivel 3: Eliminando Deudas Caras -->
        <div class="level-guide-card mb-3 border-level-3">
          <div class="d-flex align-items-center mb-2">
            <span class="level-number-badge text-white me-2" style="background-color: #fd7e14;">3</span>
            <i class="bi bi-credit-card-2-back-fill me-2" style="font-size: 1.2rem; color: #fd7e14;"></i>
            <h6 class="mb-0 flex-grow-1"><strong>Eliminando Deudas Caras</strong></h6>
          </div>
          <div class="level-content">
            <p class="mb-2 level-description">
              Tienes flujo de caja positivo y un fondo de emergencia parcial (al menos 2 meses de gastos), pero aún cargas con deudas caras
              como tarjetas de crédito o préstamos personales. Estás en una fase donde tu prioridad debería ser reducir estas deudas de alto interés
              para liberar más capacidad de ahorro mensual.
            </p>
            <span class="badge bg-light text-dark border">
              <small><strong>Criterios:</strong> Flujo positivo + Fondo parcial (≥2 meses) + Deudas caras > 0</small>
            </span>
          </div>
        </div>

        <!-- Nivel 4: Situación Estable -->
        <div class="level-guide-card mb-3 border-level-4">
          <div class="d-flex align-items-center mb-2">
            <span class="level-number-badge bg-success text-white me-2">4</span>
            <i class="bi bi-check-circle-fill text-success me-2" style="font-size: 1.2rem;"></i>
            <h6 class="mb-0 flex-grow-1"><strong>Situación Estable</strong></h6>
          </div>
          <div class="level-content">
            <p class="mb-2 level-description">
              Has alcanzado la estabilidad financiera: tienes un fondo de emergencia completo (4 meses de gastos), flujo de caja positivo,
              y has reducido tus deudas caras a menos del 40% de tu patrimonio neto. Desde aquí, puedes empezar a pensar en objetivos de largo plazo
              y crecimiento patrimonial sin el estrés de las emergencias financieras.
            </p>
            <span class="badge bg-light text-dark border">
              <small><strong>Criterios:</strong> Fondo completo + Flujo positivo + Deudas caras < 40%</small>
            </span>
          </div>
        </div>

        <!-- Nivel 5: Crecimiento Patrimonial -->
        <div class="level-guide-card mb-3 border-level-5">
          <div class="d-flex align-items-center mb-2">
            <span class="level-number-badge bg-primary text-white me-2">5</span>
            <i class="bi bi-graph-up-arrow text-primary me-2" style="font-size: 1.2rem;"></i>
            <h6 class="mb-0 flex-grow-1"><strong>Crecimiento Patrimonial</strong></h6>
          </div>
          <div class="level-content">
            <p class="mb-2 level-description">
              No solo tienes estabilidad, sino que has construido riqueza real. Tu patrimonio neto es al menos el doble de tu ingreso anual,
              lo que indica años de ahorro e inversión consistente. Estás en posición de hacer crecer tu patrimonio de forma significativa
              y planificar objetivos ambiciosos de largo plazo.
            </p>
            <span class="badge bg-light text-dark border">
              <small><strong>Criterios:</strong> Fondo completo + Flujo positivo + Patrimonio ≥ 2× ingreso anual</small>
            </span>
          </div>
        </div>

        <!-- Nivel 6: Libertad Financiera -->
        <div class="level-guide-card mb-3 border-level-6">
          <div class="d-flex align-items-center mb-2">
            <span class="level-number-badge text-dark me-2" style="background-color: #FFC65A;">6</span>
            <i class="bi bi-trophy-fill me-2" style="font-size: 1.2rem; color: #FFC65A;"></i>
            <h6 class="mb-0 flex-grow-1"><strong>Libertad Financiera</strong></h6>
          </div>
          <div class="level-content">
            <p class="mb-2 level-description">
              Has alcanzado la independencia financiera total. Tus inversiones generan suficientes ingresos pasivos para cubrir todos tus gastos mensuales,
              lo que significa que trabajar es una elección, no una necesidad. Este nivel lo alcanza menos del 2% de la población y representa
              la cúspide de la libertad financiera.
            </p>
            <span class="badge bg-light text-dark border">
              <small><strong>Criterio:</strong> Ingresos pasivos ≥ gastos mensuales totales</small>
            </span>
          </div>
        </div>

        <div class="alert alert-info mt-4 mb-0 d-flex align-items-center">
          <i class="bi bi-info-circle-fill me-2" style="font-size: 1.1rem;"></i>
          <small><strong>Nota:</strong> Tu nivel se actualiza automáticamente cuando actualizas tus datos financieros.</small>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
      </div>
    </div>
  </div>
</div>

<style>
/* Base card styling */
.level-guide-card {
  background: #ffffff;
  border: 1px solid #e9ecef;
  border-left: 3px solid;
  border-radius: 0.5rem;
  padding: 1rem 1.125rem;
  transition: all 0.2s ease;
}

.level-guide-card:hover {
  box-shadow: 0 2px 8px rgba(0,0,0,0.08);
  transform: translateX(2px);
}

/* Level-specific border colors and backgrounds */
.border-level-1 {
  border-left-color: #dc3545;
  background: linear-gradient(to right, rgba(220, 53, 69, 0.02), #ffffff);
}

.border-level-2 {
  border-left-color: #ffc107;
  background: linear-gradient(to right, rgba(255, 193, 7, 0.02), #ffffff);
}

.border-level-3 {
  border-left-color: #fd7e14;
  background: linear-gradient(to right, rgba(253, 126, 20, 0.02), #ffffff);
}

.border-level-4 {
  border-left-color: #1EDD88;
  background: linear-gradient(to right, rgba(30, 221, 136, 0.02), #ffffff);
}

.border-level-5 {
  border-left-color: #0D6EFD;
  background: linear-gradient(to right, rgba(13, 110, 253, 0.02), #ffffff);
}

.border-level-6 {
  border-left-color: #FFC65A;
  background: linear-gradient(to right, rgba(255, 198, 90, 0.03), #ffffff);
}

/* Number badge */
.level-number-badge {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 24px;
  height: 24px;
  border-radius: 50%;
  font-size: 0.75rem;
  font-weight: 700;
  flex-shrink: 0;
}

/* Level content */
.level-content {
  padding-left: 0.5rem;
  margin-top: 0.25rem;
}

/* Description text */
.level-description {
  font-size: 0.9rem;
  line-height: 1.6;
  color: #495057;
}

/* Responsive adjustments */
@media (max-width: 576px) {
  .level-guide-card {
    padding: 0.875rem 1rem;
  }

  .level-description {
    font-size: 0.85rem;
  }

  .level-content {
    padding-left: 0.25rem;
  }
}
</style>
