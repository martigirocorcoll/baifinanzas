<!-- Footer -->
<footer class="footer pt-5 pb-4 pb-lg-5 position-relative overflow-hidden" style="background: linear-gradient(135deg, rgba(229, 231, 235, 0.9) 0%, rgba(209, 213, 219, 1) 100%)">
  <div class="footer-parallax-bg position-absolute top-0 start-0 w-100 h-100"></div>
  <div class="footer-particles-container position-absolute top-0 start-0 w-100 h-100"></div>
  <div class="container text-center pt-lg-3 position-relative">
    <div class="navbar-brand justify-content-center text-dark mb-2 mb-lg-4">
      <i class="bi bi-rocket-takeoff me-2 fs-1 text-primary"></i>
      <span class="fs-4">Finex</span>
    </div>
    <div class="position-relative">
      <a href="#top" class="btn btn-icon btn-primary position-absolute" onclick="window.scrollTo({top: 0, behavior: 'smooth'}); return false;" aria-label="<%= t('views.landing.footer.back_to_top') %>" style="bottom: 20px; right: 20px;">
        <i class="bi bi-arrow-up"></i>
      </a>
    </div>
    <div class="d-flex flex-column flex-sm-row justify-content-center">
      <div class="bg-light rounded-3 px-4 py-3 me-sm-4 mb-3">
        <div class="d-flex align-items-center">
          <i class="bi bi-globe me-2 text-primary"></i>
          <div class="text-start">
            <div class="fs-6 fw-semibold"><%= t('views.landing.footer.platform.title') %></div>
            <div class="fs-sm text-muted"><%= t('views.landing.footer.platform.description') %></div>
          </div>
        </div>
      </div>
      <div class="bg-light rounded-3 px-4 py-3 mb-3">
        <div class="d-flex align-items-center">
          <i class="bi bi-shield-check me-2 text-success"></i>
          <div class="text-start">
            <div class="fs-6 fw-semibold"><%= t('views.landing.footer.security.title') %></div>
            <div class="fs-sm text-muted"><%= t('views.landing.footer.security.description') %></div>
          </div>
        </div>
      </div>
    </div>
    <div class="d-flex justify-content-center pt-4 mt-lg-3">
      <a href="mailto:hola@finexapp.com" class="btn btn-icon btn-secondary mx-2 footer-icon" aria-label="Email">
        <i class="bi bi-envelope-fill"></i>
      </a>
      <a href="https://twitter.com/finexapp" class="btn btn-icon btn-secondary mx-2 footer-icon" aria-label="Twitter" target="_blank">
        <i class="bi bi-twitter"></i>
      </a>
      <a href="https://linkedin.com/company/finexapp" class="btn btn-icon btn-secondary mx-2 footer-icon" aria-label="LinkedIn" target="_blank">
        <i class="bi bi-linkedin"></i>
      </a>
      <a href="https://instagram.com/finexapp" class="btn btn-icon btn-secondary mx-2 footer-icon" aria-label="Instagram" target="_blank">
        <i class="bi bi-instagram"></i>
      </a>
    </div>

    <!-- SecciÃ³n Sugerencias -->
    <div class="row justify-content-center pt-4">
      <div class="col-md-6">
        <div class="bg-white rounded-3 p-4 shadow-sm border">
          <div class="text-center">
            <i class="bi bi-lightbulb fs-2 text-warning mb-2"></i>
            <h5 class="mb-2"><%= t('views.landing.footer.suggestions.title') %></h5>
            <p class="text-muted small mb-3">
              <%= t('views.landing.footer.suggestions.description') %>
            </p>
            <a href="mailto:sugerencias@finexapp.com?subject=<%= t('views.landing.footer.suggestions.email_subject') %>&body=<%= t('views.landing.footer.suggestions.email_body') %>"
               class="btn btn-outline-primary btn-sm">
              <i class="bi bi-envelope me-2"></i>
              <%= t('views.landing.footer.suggestions.button') %>
            </a>
          </div>
        </div>
      </div>
    </div>

    <div class="row justify-content-center pt-4 mt-lg-3">
      <div class="col-md-8">
        <div class="d-flex flex-wrap justify-content-center gap-3 mb-3">
          <a href="#" class="text-muted text-decoration-none fs-sm"><%= t('views.landing.footer.links.terms') %></a>
          <a href="#" class="text-muted text-decoration-none fs-sm"><%= t('views.landing.footer.links.privacy') %></a>
          <a href="#" class="text-muted text-decoration-none fs-sm"><%= t('views.landing.footer.links.legal') %></a>
          <a href="mailto:hola@finexapp.com" class="text-muted text-decoration-none fs-sm"><%= t('views.landing.footer.links.contact') %></a>
        </div>
      </div>
    </div>
    <p class="nav d-block fs-sm text-center pt-3 mb-0">
      <span class="opacity-80">&copy; <%= Date.current.year %> Finex. <%= t('views.landing.footer.copyright') %></span>
    </p>
    <p class="fs-xs text-muted text-center mt-2 mb-0">
      <%= t('views.landing.footer.tagline') %>
    </p>
  </div>
</footer>

<style>
  .footer-parallax-bg {
    background: linear-gradient(135deg, rgba(229, 231, 235, 0.5) 0%, rgba(209, 213, 219, 0.8) 100%);
    will-change: transform;
  }

  .footer-icon {
    transition: transform 0.3s ease, color 0.3s ease;
  }

  .footer-icon:hover {
    transform: scale(1.1) translateY(-2px);
  }

  /* Footer Particles */
  .footer-particles-container {
    pointer-events: none;
    z-index: 0;
  }

  .footer-particle {
    position: absolute;
    width: 6px;
    height: 6px;
    background: rgba(156, 163, 175, 0.6);
    border-radius: 50%;
    animation: footer-particle-float 8s ease-in-out infinite;
    box-shadow: 0 0 6px rgba(156, 163, 175, 0.4);
  }

  @keyframes footer-particle-float {
    0%, 100% {
      transform: translateY(0px) translateX(0px);
      opacity: 0.4;
    }
    50% {
      transform: translateY(-30px) translateX(20px);
      opacity: 0.8;
    }
  }
</style>

<script>
  document.addEventListener('turbo:load', function() {
    const footer = document.querySelector('.footer');
    const parallaxBg = document.querySelector('.footer-parallax-bg');
    const footerParticlesContainer = document.querySelector('.footer-particles-container');

    // Create Footer Particles
    if (footerParticlesContainer) {
      const numberOfParticles = 25;

      for (let i = 0; i < numberOfParticles; i++) {
        const particle = document.createElement('div');
        particle.className = 'footer-particle';
        particle.style.left = Math.random() * 100 + '%';
        particle.style.top = Math.random() * 100 + '%';
        particle.style.animationDelay = Math.random() * 8 + 's';
        particle.style.animationDuration = (Math.random() * 4 + 6) + 's';
        particle.style.zIndex = '0';
        footerParticlesContainer.appendChild(particle);
      }
    }

    if (footer && parallaxBg) {
      function updateParallax() {
        const scrolled = window.pageYOffset;
        const footerRect = footer.getBoundingClientRect();
        const windowHeight = window.innerHeight;

        // Check if footer is in viewport
        if (footerRect.top < windowHeight && footerRect.bottom > 0) {
          const footerProgress = (windowHeight - footerRect.top) / (windowHeight + footerRect.height);
          const parallaxValue = footerProgress * 30; // Subtle movement

          parallaxBg.style.transform = `translateY(${parallaxValue}px) scale(1.05)`;
        }
      }

      // Throttle scroll events for better performance
      let ticking = false;
      function requestTick() {
        if (!ticking) {
          requestAnimationFrame(updateParallax);
          ticking = true;
        }
      }

      window.addEventListener('scroll', function() {
        ticking = false;
        requestTick();
      });

      // Initial call
      updateParallax();
    }
  });
</script>
