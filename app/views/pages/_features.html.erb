      <!-- Features -->
      <section id="features" class="container pt-lg-2 pt-xl-3 pb-3 pb-xl-5 mt-n2 mt-sm-0 mb-2 mb-md-4 mb-lg-5">
        <div class="row pb-xl-3 align-items-center">

          <!-- Financial graphics -->
          <div class="col-lg-5 d-none d-lg-block d-flex align-items-center">
            <div class="position-relative text-center mx-auto" style="max-width: 400px;">
              <div class="bg-light rounded-4 p-4 shadow-sm dashboard-container" id="dashboard">
                <div class="row g-3">
                  <div class="col-12">
                    <div class="rounded-3 p-3 text-center dashboard-card" data-delay="0" style="background-color: rgba(22, 86, 104, 0.1);">
                      <h5 class="mb-2" style="color: #165668;"><i class="bi bi-heart-pulse me-2"></i><%= t('views.landing.features.dashboard.health_title') %></h5>
                      <div class="progress mb-2" style="height: 8px;">
                        <div class="progress-bar progress-bar-animated" data-width="75" style="width: 0%; background-color: #165668;"></div>
                      </div>
                      <small class="text-muted"><%= t('views.landing.features.dashboard.health_level') %></small>
                    </div>
                  </div>
                  <div class="col-6">
                    <div class="rounded-3 p-3 text-center dashboard-card" data-delay="200" style="background-color: rgba(22, 86, 104, 0.1);">
                      <h6 class="mb-1" style="color: #165668;"><i class="bi bi-graph-up me-2"></i><%= t('views.landing.features.dashboard.balance_title') %></h6>
                      <div class="h5 text-success mb-0">+€2,150</div>
                      <small class="text-muted"><%= t('views.landing.features.dashboard.monthly') %></small>
                    </div>
                  </div>
                  <div class="col-6">
                    <div class="rounded-3 p-3 text-center dashboard-card" data-delay="400" style="background-color: rgba(22, 86, 104, 0.1);">
                      <h6 class="mb-1" style="color: #165668;"><i class="bi bi-wallet2 me-2"></i><%= t('views.landing.features.dashboard.patrimony_title') %></h6>
                      <div class="h5 text-success mb-0">€45,300</div>
                      <small class="text-muted"><%= t('views.landing.features.dashboard.patrimony') %></small>
                    </div>
                  </div>
                  <div class="col-12">
                    <div class="rounded-3 p-3 text-center dashboard-card" data-delay="600" style="background-color: rgba(22, 86, 104, 0.1);">
                      <h6 class="mb-2" style="color: #165668;"><i class="bi bi-house me-2"></i><%= t('views.landing.features.dashboard.objective_title') %></h6>
                      <div class="progress mb-2" style="height: 6px;">
                        <div class="progress-bar progress-bar-animated" data-width="45" style="width: 0%; background-color: #165668;"></div>
                      </div>
                      <small class="text-muted">€68,000 / €150,000</small>
                    </div>
                  </div>
                  <div class="col-12">
                    <button class="btn btn-primary btn-sm w-100 dashboard-card" data-delay="800">
                      <i class="bi bi-file-earmark-text me-2"></i><%= t('views.landing.features.dashboard.view_plan') %>
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <style>
            .dashboard-container {
              opacity: 0;
              transform: translateY(50px);
              transition: all 0.5s ease-out;
            }
            
            .dashboard-container.animate {
              opacity: 1;
              transform: translateY(0);
            }
            
            .dashboard-card {
              opacity: 0;
              transform: translateY(20px) scale(0.9);
              transition: all 0.4s ease-out;
            }
            
            .dashboard-card.animate {
              opacity: 1;
              transform: translateY(0) scale(1);
            }
            
            .progress-bar-animated {
              transition: width 1.2s ease-in-out;
            }
          </style>

          <script>
            document.addEventListener('turbo:load', function() {
              const dashboard = document.getElementById('dashboard');
              if (!dashboard) return;

              // Disconnect previous observer if any
              if (window._featuresObserver) {
                window._featuresObserver.disconnect();
                window._featuresObserver = null;
              }

              const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                  if (entry.isIntersecting) {
                    // Animar el dashboard principal
                    dashboard.classList.add('animate');
                    
                    // Animar cada card con delay
                    const cards = dashboard.querySelectorAll('.dashboard-card');
                    cards.forEach(card => {
                      const delay = parseInt(card.getAttribute('data-delay')) || 0;
                      setTimeout(() => {
                        card.classList.add('animate');
                      }, delay);
                    });
                    
                    // Animar las barras de progreso
                    setTimeout(() => {
                      const progressBars = dashboard.querySelectorAll('.progress-bar-animated');
                      progressBars.forEach(bar => {
                        const width = bar.getAttribute('data-width');
                        bar.style.width = width + '%';
                      });
                    }, 1000);
                    
                    // Dejar de observar una vez animado
                    observer.unobserve(dashboard);
                  }
                });
              }, {
                threshold: 0.3 // Se activa cuando el 30% del elemento es visible
              });
              
              window._featuresObserver = observer;
              observer.observe(dashboard);
            });
          </script>

          <!-- Feature list -->
          <div class="col-lg-7">
            <h2 class="h1 text-center text-md-start mb-4"><%= t('views.landing.features.title') %></h2>
            <p class="fs-lg text-muted text-center text-md-start mb-4 mb-xl-5"><%= t('views.landing.features.subtitle') %></p>
            <div class="row row-cols-1 row-cols-sm-2 pt-2 pt-sm-3 pt-xl-2">

              <!-- Paso 1 -->
              <div class="col pb-2 pb-xl-0 mb-4 mb-xl-5">
                <div class="d-flex align-items-start pe-xl-3">
                  <div class="d-table rounded-3 flex-shrink-0 p-3 mb-3" style="background-color: rgba(22, 86, 104, 0.1);">
                    <i class="bi bi-heart-pulse fs-4" style="color: #165668;"></i>
                  </div>
                  <div class="ps-4 ps-sm-3 ps-md-4">
                    <h3 class="h5 pb-1 mb-2"><%= t('views.landing.features.items.health.title') %></h3>
                    <p class="mb-0"><%= t('views.landing.features.items.health.description') %></p>
                  </div>
                </div>
              </div>

              <!-- Paso 2 -->
              <div class="col pb-2 pb-xl-0 mb-4 mb-xl-5">
                <div class="d-flex align-items-start ps-xl-3">
                  <div class="d-table rounded-3 flex-shrink-0 p-3 mb-3" style="background-color: rgba(22, 86, 104, 0.1);">
                    <i class="bi bi-graph-up fs-4" style="color: #165668;"></i>
                  </div>
                  <div class="ps-4 ps-sm-3 ps-md-4">
                    <h3 class="h5 pb-1 mb-2"><%= t('views.landing.features.items.plan.title') %></h3>
                    <p class="mb-0"><%= t('views.landing.features.items.plan.description') %></p>
                  </div>
                </div>
              </div>

              <!-- Paso 3 -->
              <div class="col pb-2 pb-xl-0 mb-4 mb-xl-5">
                <div class="d-flex align-items-start pe-xl-3">
                  <div class="d-table rounded-3 flex-shrink-0 p-3 mb-3" style="background-color: rgba(22, 86, 104, 0.1);">
                    <i class="bi bi-tools fs-4" style="color: #165668;"></i>
                  </div>
                  <div class="ps-4 ps-sm-3 ps-md-4">
                    <h3 class="h5 pb-1 mb-2"><%= t('views.landing.features.items.tools.title') %></h3>
                    <p class="mb-0"><%= t('views.landing.features.items.tools.description') %></p>
                  </div>
                </div>
              </div>

              <!-- Extra: Datos Seguros -->
              <div class="col pb-2 pb-xl-0 mb-4 mb-xl-5">
                <div class="d-flex align-items-start ps-xl-3">
                  <div class="d-table rounded-3 flex-shrink-0 p-3 mb-3" style="background-color: rgba(22, 86, 104, 0.1);">
                    <i class="bi bi-shield-lock fs-4" style="color: #165668;"></i>
                  </div>
                  <div class="ps-4 ps-sm-3 ps-md-4">
                    <h3 class="h5 pb-1 mb-2"><%= t('views.landing.features.items.security.title') %></h3>
                    <p class="mb-0"><%= t('views.landing.features.items.security.description') %></p>
                  </div>
                </div>
              </div>

              <!-- Extra: 100% Movil -->
              <div class="col pb-2 pb-xl-0 mb-4 mb-xl-5">
                <div class="d-flex align-items-start pe-xl-3">
                  <div class="d-table rounded-3 flex-shrink-0 p-3 mb-3" style="background-color: rgba(22, 86, 104, 0.1);">
                    <i class="bi bi-phone fs-4" style="color: #165668;"></i>
                  </div>
                  <div class="ps-4 ps-sm-3 ps-md-4">
                    <h3 class="h5 pb-1 mb-2"><%= t('views.landing.features.items.mobile.title') %></h3>
                    <p class="mb-0"><%= t('views.landing.features.items.mobile.description') %></p>
                  </div>
                </div>
              </div>

              <!-- Extra: 100% Gratuito -->
              <div class="col pb-2 pb-xl-0 mb-4 mb-xl-5">
                <div class="d-flex align-items-start ps-xl-3">
                  <div class="d-table rounded-3 flex-shrink-0 p-3 mb-3" style="background-color: rgba(22, 86, 104, 0.1);">
                    <i class="bi bi-cash-coin fs-4" style="color: #165668;"></i>
                  </div>
                  <div class="ps-4 ps-sm-3 ps-md-4">
                    <h3 class="h5 pb-1 mb-2"><%= t('views.landing.features.items.free.title') %></h3>
                    <p class="mb-0"><%= t('views.landing.features.items.free.description') %></p>
                  </div>
                </div>
              </div>
            </div>

            <!-- CTA Button -->
            <div class="text-center mt-5">
              <%= link_to "#", class: "btn btn-primary btn-lg px-5 py-3" do %>
                <i class="bi bi-download me-2"></i>
                <%= t('views.landing.features.cta') %>
              <% end %>
            </div>
          </div>
        </div>
      </section>
